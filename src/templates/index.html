<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeSage - Code Review Assistant</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; max-width: 800px; margin: 0 auto; }
        h1 { color: #333; }
        #results { margin-top: 20px; }
        .issue { margin-bottom: 10px; padding: 10px; background-color: #f4f4f4; border-radius: 5px; }
        .issue-type { font-weight: bold; color: #e74c3c; }
    </style>
</head>
<body>
    <h1>CodeSage - Code Review Assistant</h1>
    <form id="upload-form">
        <input type="file" id="file-input" accept=".py">
        <button type="submit">Analyze</button>
    </form>
    <div id="results"></div>

    <script>
        document.getElementById('upload-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const fileInput = document.getElementById('file-input');
            const file = fileInput.files[0];
            if (file) {
                const formData = new FormData();
                formData.append('file', file);
                axios.post('/analyze', formData)
                    .then(function (response) {
                        const results = document.getElementById('results');
                        results.innerHTML = '';
                        response.data.forEach(function(issue) {
                            const issueDiv = document.createElement('div');
                            issueDiv.className = 'issue';
                            issueDiv.innerHTML = `<span class="issue-type">[${issue.type}]</span> Line ${issue.line}: ${issue.message}`;
                            results.appendChild(issueDiv);
                        });
                    })
                    .catch(function (error) {
                        console.error('Error:', error);
                    });
            }
        });
    </script>
</body>
</html>